<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×¦'××˜ ×¢× ×‘×™× ×” ××œ××›×•×ª×™×ª</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .chat-header {
            background: #4a5568;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .chat-messages {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .message {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            max-width: 80%;
        }

        .user-message {
            background: #e2e8f0;
            margin-left: auto;
            text-align: right;
        }

        .ai-message {
            background: #f0fff4;
            margin-right: auto;
        }

        .input-area {
            padding: 20px;
            display: flex;
            gap: 10px;
        }

        #messageInput {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }

        #sendButton {
            padding: 12px 24px;
            background: #4a5568;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }

        #sendButton:hover {
            background: #2d3748;
        }

        #sendButton:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }

        .api-selector {
            padding: 20px;
            background: #f7fafc;
            border-bottom: 1px solid #eee;
        }

        select {
            padding: 8px;
            margin-left: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .api-key-input {
            margin-top: 10px;
            display: none;
        }

        .api-key-input input {
            width: 300px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>ğŸ¤– ×¦'××˜ ×¢× ×‘×™× ×” ××œ××›×•×ª×™×ª</h1>
            <p>×¡×§×¨×™×¤×˜ ×¤×©×•×˜ ×œ×©×™×—×” ×¢× AI ×œ×œ× ×”×’×‘×œ×•×ª</p>
        </div>

        <div class="api-selector">
            <label>
                ×‘×—×¨ ×¡×¤×§ AI:
                <select id="apiProvider">
                    <option value="huggingface">Hugging Face (×—×™× ××™)</option>
                    <option value="gemini">Google Gemini (×—×™× ××™)</option>
                    <option value="openai">OpenAI</option>
                    <option value="anthropic">Anthropic (Claude)</option>
                    <option value="cohere">Cohere</option>
                    <option value="groq">Groq (×—×™× ××™)</option>
                </select>
            </label>

            <div id="apiKeyInput" class="api-key-input">
                <label>
                    ××¤×ª×— API:
                    <input type="password" id="apiKey" placeholder="×”×›× ×¡ ××ª ××¤×ª×— ×”-API">
                </label>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="ai-message message">
                ×©×œ×•×! ×× ×™ ×›××Ÿ ×œ×¢×–×•×¨ ×œ×š. ××™×š ××•×›×œ ×œ×¡×™×™×¢?
            </div>
        </div>

        <div class="input-area">
            <input type="text" id="messageInput" placeholder="×›×ª×•×‘ ××ª ×”×©××œ×” ×©×œ×š ×›××Ÿ..." maxlength="1000">
            <button id="sendButton">×©×œ×—</button>
        </div>
    </div>

    <script>
        class AIChatClient {
            constructor() {
                this.apiProvider = 'huggingface';
                this.apiKey = '';
                this.chatMessages = document.getElementById('chatMessages');
                this.messageInput = document.getElementById('messageInput');
                this.sendButton = document.getElementById('sendButton');
                this.apiProviderSelect = document.getElementById('apiProvider');
                this.apiKeyInput = document.getElementById('apiKeyInput');
                this.apiKeyField = document.getElementById('apiKey');

                this.initializeEventListeners();
            }

            initializeEventListeners() {
                this.sendButton.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendMessage();
                });

                this.apiProviderSelect.addEventListener('change', () => {
                    this.apiProvider = this.apiProviderSelect.value;
                    this.updateAPIKeyVisibility();
                });

                this.apiKeyField.addEventListener('input', () => {
                    this.apiKey = this.apiKeyField.value;
                });
            }

            updateAPIKeyVisibility() {
                if (this.apiProvider === 'huggingface' || this.apiProvider === 'groq') {
                    this.apiKeyInput.style.display = 'none';
                } else {
                    this.apiKeyInput.style.display = 'block';
                }
            }

            addMessage(content, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
                messageDiv.textContent = content;
                this.chatMessages.appendChild(messageDiv);
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }

            showLoading() {
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'loading';
                loadingDiv.textContent = 'â³ ×”×‘×™× ×” ×”××œ××›×•×ª×™×ª ×—×•×©×‘×ª...';
                loadingDiv.id = 'loadingMessage';
                this.chatMessages.appendChild(loadingDiv);
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }

            hideLoading() {
                const loadingMsg = document.getElementById('loadingMessage');
                if (loadingMsg) loadingMsg.remove();
            }

            async sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message) return;

                // Add user message
                this.addMessage(message, true);
                this.messageInput.value = '';
                this.sendButton.disabled = true;
                this.showLoading();

                try {
                    const response = await this.callAI(message);
                    this.hideLoading();
                    this.addMessage(response);
                } catch (error) {
                    this.hideLoading();
                    this.addMessage(`âŒ ×©×’×™××”: ${error.message}`);
                } finally {
                    this.sendButton.disabled = false;
                }
            }

            async callAI(message) {
                switch (this.apiProvider) {
                    case 'huggingface':
                        return await this.callHuggingFace(message);
                    case 'gemini':
                        return await this.callGemini(message);
                    case 'groq':
                        return await this.callGroq(message);
                    case 'openai':
                        return await this.callOpenAI(message);
                    case 'anthropic':
                        return await this.callAnthropic(message);
                    case 'cohere':
                        return await this.callCohere(message);
                    default:
                        throw new Error('×¡×¤×§ AI ×œ× × ×ª××š');
                }
            }

            async callHuggingFace(message) {
                // Using a free Hugging Face model that doesn't require API key
                const response = await fetch('https://api-inference.huggingface.co/models/microsoft/DialoGPT-medium', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        inputs: message,
                        parameters: {
                            max_length: 200,
                            temperature: 0.7
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error('×©×™×¨×•×ª Hugging Face ×œ× ×–××™×Ÿ ×›×¢×ª');
                }

                const data = await response.json();
                return data.generated_text || data[0]?.generated_text || '××¦×˜×¢×¨, ×œ× ×”×¦×œ×—×ª×™ ×œ×”×‘×™×Ÿ ××ª ×”×©××œ×”';
            }

            async callGroq(message) {
                // Groq offers free API access
                if (!this.apiKey && this.apiProvider === 'groq') {
                    throw new Error('× ×“×¨×© ××¤×ª×— API ×©×œ Groq. × ×™×ª×Ÿ ×œ×§×‘×œ ×—×™× × ×: https://console.groq.com');
                }

                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${this.apiKey}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'mixtral-8x7b-32768',
                        messages: [
                            {
                                role: 'user',
                                content: message
                            }
                        ],
                        max_tokens: 500,
                        temperature: 0.7
                    })
                });

                const data = await response.json();
                if (!response.ok) {
                    throw new Error(data.error?.message || '×©×’×™××” ×‘×§×¨×™××” ×œ-Groq');
                }

                return data.choices[0].message.content;
            }

            async callOpenAI(message) {
                if (!this.apiKey) {
                    throw new Error('× ×“×¨×© ××¤×ª×— API ×©×œ OpenAI');
                }

                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${this.apiKey}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [{ role: 'user', content: message }],
                        max_tokens: 500
                    })
                });

                const data = await response.json();
                if (!response.ok) {
                    throw new Error(data.error?.message || '×©×’×™××” ×‘×§×¨×™××” ×œ-OpenAI');
                }

                return data.choices[0].message.content;
            }

            async callAnthropic(message) {
                if (!this.apiKey) {
                    throw new Error('× ×“×¨×© ××¤×ª×— API ×©×œ Anthropic');
                }

                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'x-api-key': this.apiKey,
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-3-sonnet-20240229',
                        max_tokens: 500,
                        messages: [{ role: 'user', content: message }]
                    })
                });

                const data = await response.json();
                if (!response.ok) {
                    throw new Error(data.error?.message || '×©×’×™××” ×‘×§×¨×™××” ×œ-Anthropic');
                }

                return data.content[0].text;
            }

            async callGemini(message) {
                if (!this.apiKey) {
                    throw new Error('× ×“×¨×© ××¤×ª×— API ×©×œ Google. ×§×‘×œ ×—×™× × ×: https://makersuite.google.com/app/apikey');
                }

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${this.apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: message
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 1024,
                        },
                        safetySettings: [
                            {
                                category: "HARM_CATEGORY_HARASSMENT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_HATE_SPEECH",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_xxxxxxxxxxxxxxxxx_EXPLICIT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_DANGEROUS_CONTENT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            }
                        ]
                    })
                });

                const data = await response.json();
                if (!response.ok) {
                    throw new Error(data.error?.message || '×©×’×™××” ×‘×§×¨×™××” ×œ-Gemini');
                }

                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    throw new Error('Gemini ×œ× ×”×—×–×™×¨ ×ª×©×•×‘×” ×ª×§×™× ×”');
                }
            }

            async callCohere(message) {
                if (!this.apiKey) {
                    throw new Error('× ×“×¨×© ××¤×ª×— API ×©×œ Cohere');
                }

                const response = await fetch('https://api.cohere.ai/v1/generate', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${this.apiKey}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'command',
                        prompt: message,
                        max_tokens: 500,
                        temperature: 0.7
                    })
                });

                const data = await response.json();
                if (!response.ok) {
                    throw new Error(data.message || '×©×’×™××” ×‘×§×¨×™××” ×œ-Cohere');
                }

                return data.generations[0].text.trim();
            }
        }

        // Initialize the chat client
        const chatClient = new AIChatClient();

        // Add welcome message with instructions
        setTimeout(() => {
            chatClient.addMessage('ğŸ’¡ ×˜×™×¤×™× ×œ×©×™××•×©:\nâ€¢ Hugging Face - ×—×™× ××™ ×œ×—×œ×•×˜×™×Ÿ\nâ€¢ Google Gemini - ×—×™× ××™ ×¢× ××’×‘×œ×•×ª\nâ€¢ Groq - ××”×™×¨ ×•×—×™× ××™ (×“×•×¨×© ×”×¨×©××”)\nâ€¢ OpenAI, Anthropic, Cohere - ×“×•×¨×©×™× ××¤×ª×— API ×‘×ª×©×œ×•×');
        }, 1000);
    </script>
</body>
</html>