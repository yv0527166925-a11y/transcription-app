// פתרון סופי - עכשיו באמת!
function solveItNow() {
  console.log('🚀 פותר את זה עכשיו!');

  const cases = [
    '"מה אתה אומר"שאל הרב.',
    'אמר"שלום."והלך.',
    'הם קראו"שמע ישראל".היום.'
  ];

  console.log('\\n🔍 ניתוח הבעיות:');

  // מקרה 1: "אומר"שאל -> "אומר" שאל
  console.log('\\n🎯 מקרה 1: גרשיים סוגרים צמודים');
  let test1 = '"מה אתה אומר"שאל הרב.';
  console.log('לפני:', test1);

  // הפתרון: חפש מילה+גרשיים+מילה ותוסיף רווח אחרי הגרשיים
  test1 = test1.replace(/([א-ת])"([א-ת])/g, '$1 "$2'); // רווח לפני גרשיים פותחים
  console.log('אחרי שלב 1:', test1);

  // עכשיו יש לנו: "מה אתה אומר "שאל הרב.
  // צריך: "מה אתה אומר" שאל הרב.
  // הפתרון: להחליף מילה רווח גרשיים במילה גרשיים רווח
  test1 = test1.replace(/([א-ת]) "([א-ת])/g, '$1" $2');
  console.log('אחרי שלב 2:', test1);

  // מקרים 2&3: ."מילה -> ". מילה
  console.log('\\n🎯 מקרים 2&3: נקודה+גרשיים צמודים למילה');
  let test2 = 'אמר"שלום."והלך.';
  console.log('לפני:', test2);

  test2 = test2.replace(/([א-ת])"([א-ת])/g, '$1 "$2'); // רווח לפני גרשיים
  console.log('אחרי רווח לפני גרשיים:', test2);

  // עכשיו צריך לטפל ב: ."והלך -> ". והלך
  test2 = test2.replace(/\\."([א-ת])/g, '." $1');
  console.log('אחרי תיקון נקודה+גרשיים:', test2);

  console.log('\\n🧪 בדיקת הפתרון על כל המקרים:');

  const testCases = [
    { input: '"מה אתה אומר"שאל הרב.', expected: '"מה אתה אומר" שאל הרב.' },
    { input: 'אמר"שלום."והלך.', expected: 'אמר "שלום". והלך.' },
    { input: 'הם קראו"שמע ישראל".היום.', expected: 'הם קראו "שמע ישראל". היום.' }
  ];

  let allWork = true;
  testCases.forEach((tc, i) => {
    let result = tc.input
      .replace(/([א-ת])"([א-ת])/g, '$1 "$2')  // רווח לפני גרשיים פותחים
      .replace(/([א-ת]) "([א-ת])/g, '$1" $2') // תיקון גרשיים סוגרים
      .replace(/\\."([א-ת])/g, '." $1');        // רווח אחרי נקודה+גרשיים

    let works = result === tc.expected;
    console.log(`מקרה ${i+1}: ${works ? '✅' : '❌'} "${result}"`);
    if (!works) {
      console.log(`  צפוי: "${tc.expected}"`);
      allWork = false;
    }
  });

  if (allWork) {
    console.log('\\n🎉🎉🎉 כל המקרים עובדים! מוסיף לשרת! 🎉🎉🎉');
  } else {
    console.log('\\n😤 עדיין לא... בואי נתקן!');
  }

  return allWork;
}

solveItNow();