// ×¤×ª×¨×•×Ÿ ×¡×•×¤×™ ×œ×‘×¢×™×•×ª ×¤×™×¡×•×§ ×•×¦×ž×™×“×•×ª ×’×¨×©×™×™×
function finalPunctuationSolution() {
  console.log('ðŸ§ª Final solution for punctuation and quotation issues...');

  const testCases = [
    '×”×•× ××ž×¨"×× ×™ ×”×•×œ×š ×”×‘×™×ª×”".',
    '×”×¡×¤×¨"×ª×•×¨×”" × ×ž×¦× ×¢×œ ×”×©×•×œ×—×Ÿ.',
    '"×ž×” ××ª×” ××•×ž×¨"×©××œ ×”×¨×‘.',
    '××ž×¨"×©×œ×•×."×•×”×œ×š.',
    '×”× ×§×¨××•"×©×ž×¢ ×™×©×¨××œ".×”×™×•×.',
    '"×‘×¨×•×š ×”×©×"××ž×¨ ×”×™×œ×“.',
  ];

  testCases.forEach((testCase, index) => {
    console.log(`\\n--- Test ${index + 1} ---`);
    console.log('×œ×¤× ×™:', testCase);

    let text = testCase;

    // **×’×™×©×” ×—×“×©×”: ×˜×™×¤×•×œ × ×¤×¨×“ ×‘×›×œ ×¡×•×’ ×‘×¢×™×”**

    // 1. ×ª×™×§×•×Ÿ × ×§×•×“×” ×‘×ž×§×•× ×”×œ× × ×›×•×Ÿ ×ª×—×™×œ×” (×œ×¤× ×™ ×”×ª×¢×¨×‘×•×™×•×ª ××—×¨×•×ª)
    text = text.replace(/([×-×ª])\\."/g, '$1".');

    // 2. ×’×¨×©×™×™× ×¤×•×ª×—×™× ×¦×ž×•×“×™× ×œ×ž×™×œ×” (×ž×™×œ×”"×˜×§×¡×˜ -> ×ž×™×œ×” "×˜×§×¡×˜)
    // ×¨×§ ×›××©×¨ ××™×Ÿ ×¨×•×•×— ×œ×¤× ×™ ×”×ž×™×œ×” ×”×¨××©×•× ×”
    text = text.replace(/([×-×ª])"([×-×ª][^"]*)/g, '$1 "$2');

    // 3. ×’×¨×©×™×™× ×¡×•×’×¨×™× ×¢× ×¤×™×¡×•×§ ×¦×ž×•×“×™× ×œ×ž×™×œ×” (."×ž×™×œ×” -> ". ×ž×™×œ×”)
    text = text.replace(/"\\.([×-×ª])/g, '". $1');

    // 4. ×’×¨×©×™×™× ×¡×•×’×¨×™× ×¨×’×™×œ×™× ×¦×ž×•×“×™× ×œ×ž×™×œ×” ("×˜×§×¡×˜"×ž×™×œ×” -> "×˜×§×¡×˜" ×ž×™×œ×”)
    // ××‘×œ ×¨×§ ×× ×œ× ×˜×™×¤×œ× ×• ×‘×–×” ×›×‘×¨
    text = text.replace(/([×-×ª][^"\\.])"([×-×ª])/g, '$1" $2');

    console.log('××—×¨×™:', text);

    // ×”×¦×™×’ ×ž×” ×”×™×™× ×• ×ž×¦×¤×™× ×œ×§×‘×œ
    const expected = [
      '×”×•× ××ž×¨ "×× ×™ ×”×•×œ×š ×”×‘×™×ª×”".',
      '×”×¡×¤×¨ "×ª×•×¨×”" × ×ž×¦× ×¢×œ ×”×©×•×œ×—×Ÿ.',
      '"×ž×” ××ª×” ××•×ž×¨" ×©××œ ×”×¨×‘.',
      '××ž×¨ "×©×œ×•×". ×•×”×œ×š.',
      '×”× ×§×¨××• "×©×ž×¢ ×™×©×¨××œ". ×”×™×•×.',
      '"×‘×¨×•×š ×”×©×" ××ž×¨ ×”×™×œ×“.',
    ];

    console.log('×¦×™×¤×™×”:', expected[index]);
    console.log('âœ… ×ª×§×™×Ÿ:', text === expected[index] ? '×›×Ÿ' : '×œ×');
  });

  console.log('\\nðŸ“‹ ×”×¤×ª×¨×•×Ÿ ×”×¡×•×¤×™:');
  console.log('1. ×ª×™×§×•×Ÿ × ×§×•×“×” ×‘×ž×§×•× ×”×œ× × ×›×•×Ÿ: /([×-×ª])\\\\."/g -> $1".');
  console.log('2. ×¨×•×•×— ×œ×¤× ×™ ×’×¨×©×™×™× ×¤×•×ª×—×™×: /([×-×ª])"([×-×ª][^"]*)/g -> $1 "$2');
  console.log('3. ×¨×•×•×— ××—×¨×™ ×’×¨×©×™×™×+× ×§×•×“×”: /"\\\\.([×-×ª])/g -> ". $1');
  console.log('4. ×¨×•×•×— ××—×¨×™ ×’×¨×©×™×™× ×¡×•×’×¨×™×: /([×-×ª][^".)])"([×-×ª])/g -> $1" $2');
}

finalPunctuationSolution();