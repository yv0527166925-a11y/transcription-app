# 🧪 מדריך בדיקת תרחישי כשל

## 🎯 מטרה
לוודא שהמערכת **לא מחייבת** כשהתמלול נכשל.

## 🚀 דרכים לבדוק כשל:

### 1️⃣ **בדיקה קלה - קובץ טקסט**
```bash
# צור קובץ טקסט עם סיומת אודיו
echo "זה לא קובץ אודיו!" > fake_audio.mp3
```

### 2️⃣ **בדיקה עם הסקריפט**
```bash
node test-failure-scenarios.js
```

### 3️⃣ **בדיקה ידנית**
1. צור קובץ טקסט רגיל
2. שנה לו את הסיומת ל-`.mp3` או `.wav`
3. העלה דרך הממשק

## 📊 מה לבדוק:

### ✅ **התנהגות נכונה:**
- הודעת שגיאה: `"התמלול נכשל - לא בוצע חיוב"`
- יתרת הדקות **לא השתנתה**
- פרוגרס מגיע ל-100% עם הודעת שגיאה
- לא נשלח אימייל עם תוצאות

### ❌ **התנהגות שגויה (לתקן):**
- חיוב למרות כשל
- יתרה יורדת
- הודעת הצלחה למרות כשל
- אימייל עם תוצאות ריקות

## 🔍 איפה לבדוק ביתרה:

### בממשק:
- עליון ימין: "דקות נותרות: X"
- לפני ואחרי התמלול הנכשל

### בקונסול הסרבר:
חפש את ההודעות:
```
🆓 No transcriptions completed for: [email] - NO CHARGE
💰 User balance unchanged: X minutes
```

## ⚡ בדיקה מהירה:

1. רשום את היתרה הנוכחית
2. העלה קובץ מקולקל
3. חכה לסיום
4. בדוק שהיתרה נותרה זהה

## 🎭 תרחישים נוספים:

### כשל חלקי (2 קבצים: 1 מצליח, 1 נכשל):
- צריך לחייב רק עבור הקובץ המוצלח
- הודעה: "התמלול הושלם חלקית"

### כשל מלא (כל הקבצים נכשלים):
- אין חיוב כלל
- הודעה: "התמלול נכשל - לא בוצע חיוב"