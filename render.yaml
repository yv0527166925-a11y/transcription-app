services:
  - type: web
    name: transcription-app
    env: node
    plan: standard # ××• Pro ×× ×¦×¨×™×š ×™×•×ª×¨ ××©××‘×™× ×œ×§×‘×¦×™× ×’×“×•×œ×™×
    
    # ğŸ”¥ Build command ××¢×•×“×›×Ÿ ×¢× FFmpeg
    buildCommand: |
      npm install && 
      apt-get update && 
      apt-get install -y ffmpeg && 
      echo "âœ… FFmpeg installed successfully" &&
      ffmpeg -version | head -1
    
    startCommand: "npm start"
    
    # Health check endpoint
    healthCheckPath: /health
    
    # ğŸ”¥ ××©××‘×™× ××•×’×“×œ×™× ×œ×¢×™×‘×•×“ ×§×‘×¦×™× ×’×“×•×œ×™×
    numCpus: 2      # 2 CPUs ×œ×¢×™×‘×•×“ ××”×™×¨ ×™×•×ª×¨
    memoryGB: 4     # 4GB RAM ×œ×§×‘×¦×™× ×’×“×•×œ×™×
    
    # ğŸ”¥ ××—×¡×•×Ÿ ×–×× ×™ ×œ×§×˜×¢×™ ××•×“×™×•
    disk:
      name: temp-audio-storage
      mountPath: /tmp/audio-chunks
      sizeGB: 10    # 10GB ×œ××—×¡×•×Ÿ ×–×× ×™ ×©×œ ×§×˜×¢×™ ××•×“×™×•
    
    # Environment variables
    envVars:
      - key: NODE_ENV
        value: production
      - key: GEMINI_API_KEY
        sync: false  # ×”×’×“×¨ ×‘×“×©×‘×•×¨×“ ×©×œ Render
      - key: EMAIL_USER
        sync: false  # ×”×’×“×¨ ×‘×“×©×‘×•×¨×“ ×©×œ Render
      - key: EMAIL_PASS
        sync: false  # ×”×’×“×¨ ×‘×“×©×‘×•×¨×“ ×©×œ Render
      - key: PORT
        value: "3000"
    
    # ğŸ”¥ ×”×’×“×¨×•×ª ×¨×©×ª ××ª×§×“××•×ª
    autoDeploy: true
    
    # ğŸ”¥ ×”×’×“×¨×•×ª timeout ××•×’×“×œ×•×ª ×œ×§×‘×¦×™× ×’×“×•×œ×™×
    # (××œ×” ×™×•×’×“×¨×• ×‘×¨××ª ×”×©×¨×ª, ×œ× ×‘-render.yaml)
    
    # ğŸ”¥ Pre-deploy hooks (××•×¤×¦×™×•× ×œ×™)
    preDeployCommand: |
      echo "ğŸš€ Starting enhanced transcription app deployment..." &&
      echo "ğŸ“Š Checking system resources..." &&
      df -h &&
      free -h &&
      echo "ğŸ”§ Verifying FFmpeg installation..." &&
      which ffmpeg || echo "âš ï¸ FFmpeg not found during pre-deploy"
    
    # ğŸ”¥ ×”×’×“×¨×•×ª logging ××ª×§×“××•×ª
    # Render ×™×˜×¤×œ ×‘×–×” ××•×˜×•××˜×™, ××‘×œ ××¤×©×¨ ×œ×”×•×¡×™×£:
    # logLevel: info

# ğŸ”¥ ×”×’×“×¨×•×ª × ×•×¡×¤×•×ª (××•×¤×¦×™×•× ×œ×™×•×ª)
# ×× ×ª×¨×¦×” ××¡×“ × ×ª×•× ×™× ×‘×¢×ª×™×“:
# databases:
#   - name: transcription-db
#     databaseName: transcription
#     user: transcription_user
#     plan: starter  # ××• free

# ğŸ”¥ ×”×’×“×¨×•×ª Cron jobs ×× ×ª×¨×¦×” × ×™×§×•×™ ××•×˜×•××˜×™
# cronjobs:
#   - name: cleanup-temp-files
#     schedule: "0 2 * * *"  # ×›×œ ×™×•× ×‘-2:00 ×‘×œ×™×œ×”
#     command: "find /tmp/audio-chunks -type f -mtime +1 -delete"
